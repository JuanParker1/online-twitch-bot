// OTB_Root React Component
//
// Generated by IC STRATEGY
//
// WARNING: Do not change this code; it will be overwritten by the next generation run!
//          Change the code only in the Visual Paradigm Project.

import React from 'react';
import * as _ from 'lodash';
var DomainAPI = require('../domain-entity/DomainAPI');
import OTB_Header from './OTB_Header';
import OTB_ModalForm from './OTB_ModalForm';
import {Switch} from 'react-router-dom';

class OTB_Root extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            user: null
        };
    };

    static defaultProps = {
        location: '/'
    };

    render() {
        var self = this;
        if (true) {
            return (
                <span className={"root " + ""} style={self.props.style || {}}>
                    <OTB_Header application={self.state.application} location={self.props.location} user={self.state.user}/>
                    <Switch>
                        { React.Children.map(self.props.children, function (child) {
                            return React.cloneElement(child, {
                                render: function (props) {
                                    return child.props.render(self.state);
                                }
                            });
                        })}
                    </Switch>
                    <OTB_ModalForm />
                </span>
            );
        } else {
            return (<span />);
        }
    };

    componentDidMount() {
        DomainAPI.OTB_UserConnect(this, 'user');
        DomainAPI.OTB_ApplicationConnect(this, 'application');
        DomainAPI.OTB_UserConnect(this, 'user');
        DomainAPI.OTB_ApplicationConnect(this, 'application');
        DomainAPI.OTB_UserConnect(this, 'user');
    };

    componentWillUnmount() {
        DomainAPI.OTB_UserDisconnect(this);
        DomainAPI.OTB_ApplicationDisconnect(this);
    };
}

export default OTB_Root;
