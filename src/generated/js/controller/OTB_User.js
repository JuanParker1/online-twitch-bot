// OTB_User Controllers
// 
// Generated by IC STRATEGY
//
// WARNING: Do not change this code; it will be overwritten by the next generation run!
//          Change the code only in the Visual Paradigm Project.

import * as Form from '../form/OTB_User';
import {OTB_User} from '../domain-entity/OTB_User';
var DomainAPI = require('../domain-entity/DomainAPI');

var CreateController = function(contextObject) {
    var form = new Form.Create(contextObject).open();
    $.when(form).done(function(formData) {
        if (formData) {
            switch(formData.action) {
                case 'save':
                    formData.values = formData.values || {};
                    if (contextObject['commandCategoryCreator']) {
                        formData.values['commandCategoryCreator'] = contextObject['commandCategoryCreator'];
                    }
                    if (contextObject['levelRanksUser']) {
                        formData.values['levelRanksUser'] = contextObject['levelRanksUser'];
                    }
                    if (contextObject['pointRanksUser']) {
                        formData.values['pointRanksUser'] = contextObject['pointRanksUser'];
                    }
                    if (contextObject['levelUser']) {
                        formData.values['levelUser'] = contextObject['levelUser'];
                    }
                    if (contextObject['variableCategoryCreator']) {
                        formData.values['variableCategoryCreator'] = contextObject['variableCategoryCreator'];
                    }
                    if (contextObject['functionCategoryCreator']) {
                        formData.values['functionCategoryCreator'] = contextObject['functionCategoryCreator'];
                    }
                    if (contextObject['pluginCreator']) {
                        formData.values['pluginCreator'] = contextObject['pluginCreator'];
                    }
                    if (contextObject['pluginUsers']) {
                        formData.values['pluginUsers'] = contextObject['pluginUsers'];
                    }
                    if (contextObject['defaultCommandUsage']) {
                        formData.values['defaultCommandUsage'] = contextObject['defaultCommandUsage'];
                    }
                    if (contextObject['pointUser']) {
                        formData.values['pointUser'] = contextObject['pointUser'];
                    }
                    if (contextObject['queueUser']) {
                        formData.values['queueUser'] = contextObject['queueUser'];
                    }
                    if (contextObject['historyUser']) {
                        formData.values['historyUser'] = contextObject['historyUser'];
                    }                    
DomainAPI.OTB_UserCreate(formData.values, contextObject.user);
                    break;
            }
        }
    });
};
var UpdateController = function(contextObject) {
    function openUpdateForm(loadedEntity, user) {
        var form = new Form.Update(contextObject).open(loadedEntity.getValues());
        $.when(form).done(function(formData) {
            if (formData) {
                switch(formData.action) {
                    case 'save':
                        loadedEntity.setValues(formData.values);
                        DomainAPI.OTB_UserUpdate(loadedEntity, formData.values, user);
                        break;
                    case 'delete':
                        DomainAPI.OTB_UserDelete(loadedEntity, user);
                        break;
                }
            }
        });
    }
    var entity = contextObject.entity || contextObject;
    if (entity.loadStatus === 'proxy') {
        entity.loadInstance(OTB_User, entity.id, function(loadedEntity) {
            openUpdateForm(loadedEntity, contextObject.user);
        }, contextObject.user);
    } else {
        openUpdateForm(entity, contextObject.user);
    }
};
module.exports = {
    Create: CreateController,
    Update: UpdateController}

